# Что здесь происходит
Я написала программу для свёртки матриц на языке C++. Она работает исправно. Исходный код находится в файле `main.cpp`. Результат работы представлен для матриц, полученных из изображений `figures.png` и `figures_small.png`. Результаты находятся в файлах `example.txt` и `example_small.txt` соответственно и могут быть просмотрены с помощью скрипта `mat_viewer.py`:
```bash
python3 mat_viewer.py example.txt 98 98
```
или
```bash
python3 mat_viewer.py example_small.txt 8 8
```
(Для просмотра изображений используется библиотека opencv, были трудности с её установкой и использованием для C++, поэтому вот так)

Далее я пытаюсь сделать параллельный вариант. На мои потуги можно посмотреть в файле `main.cu`. Он отличается от `main.cpp` (ещё бы), но общая идея сохраняется. По крайней мере, мне хочется в это верить. Только вот программа не работает даже при попытке произвести свёртку матрицы и числа 1. Результат отличается от исходной матрицы, более того, он каждый раз разный. Я не могу понять, в какой момент всё ломается. Обратите внимание на строки 32-36. Строка 40 выводится, всё отлично. Строки 33-35 точно такие же, как и 30-32 в `main.cpp`. Строка 36 (и даже 40) не выводится. Может, оно и к лучшему, а то мало ли, терминал не выдержит. Скорее всего, я где-то напортачила с указателями, да так сильно, что программа молча ничего не делает и завершает работу как ни в чём не бывало.

Ниже описываю, как посмотреть на работу неработающей программы:
```bash
python3 img_to_mat.py figures_small.png matrix.txt # Опционально
# Скрипт выведет предпросмотр изображения, нужно нажать клавишу Enter. Иначе процесс зависнет и придётся прибить его вручную
./cuda_convolver
# Осторожно, много текста
python3 mat_viewer.py conv_matrix.txt 10 10 # Просмотр результата
# Здесь тоже желательно нажать Enter
```
Скрипт `img_to_mat.py` формирует входной файл `matrix.txt`. Его не обязательно запускать, так как `matrix.txt` уже заполнен. Далее программа выполнит свою работу как умеет и сохранит результат в файле `conv_matrix.txt`. Далее его можно будет просмотреть с помощью `mat_viewer.py`.
